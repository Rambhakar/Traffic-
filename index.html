<!DOCTYPE html>
<html lang="en">

   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Traffic Signal Demo</title>

      <style>
         body {
            margin: 0;
            height: 100vh;
            background: #87ceeb;
            overflow: hidden;
            font-family: Arial, sans-serif;
         }

         /* ===== ROAD ===== */
         .road {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 28vh;
            background: #2b2b2b;
         }

         .road::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 100%;
            height: 5px;
            background: repeating-linear-gradient(to right,
                  white 0 30px,
                  transparent 40px 80px);
            transform: translateY(-50%);
         }

         /* ===== CAR ===== */
         .car {
            position: absolute;
            bottom: 8vh;
            left: -150px;
            width: 140px;
            height: 45px;
            background: red;
            border-radius: 10px;
            animation: moveCar 10s linear infinite;
         }

         .car::before,
         .car::after {
            content: "";
            position: absolute;
            bottom: -12px;
            width: 28px;
            height: 28px;
            background: black;
            border-radius: 50%;
         }

         .car::before {
            left: 15px;
         }

         .car::after {
            right: 15px;
         }

         .stop {
            animation-play-state: paused;
         }

         /* ===== SIGNAL ===== */
         .signal-area {
            position: absolute;
            right: 4vw;
            bottom: 28vh;
            transform: scale(1);
         }

         .signal-box {
            background: #111;
            padding: 16px;
            border-radius: 18px;
            text-align: center;
         }

         .timer {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
         }

         .light {
            width: 60px;
            height: 60px;
            background: #333;
            border-radius: 50%;
            margin: 10px auto;
         }

         .red.active {
            background: red;
            box-shadow: 0 0 20px red;
         }

         .yellow.active {
            background: yellow;
            box-shadow: 0 0 20px yellow;
         }

         .green.active {
            background: limegreen;
            box-shadow: 0 0 20px limegreen;
         }

         .pole {
            width: 16px;
            height: 14vh;
            background: #555;
            margin: auto;
         }

         /* ===== BUTTON ===== */
         button {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            background: #00e676;
            cursor: pointer;
         }

         /* ===== RESPONSIVE ===== */
         @media (max-width: 600px) {
            .road {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 28vh;
            background: #2b2b2b;
         }
            .signal-area {
               transform: scale(1.2);
            }

            .car {
               width: 110px;
            }
         }

         @keyframes moveCar {
            from {
               left: -160px;
            }

            to {
               left: 100%;
            }
         }
      </style>
   </head>

   <body>

      <button onclick="startSignal()">Start Traffic</button>

      <!-- SIGNAL -->
      <div class="signal-area">
         <div class="signal-box">
            <div class="timer" id="timer">---</div>
            <div class="light red" id="red"></div>
            <div class="light yellow" id="yellow"></div>
            <div class="light green" id="green"></div>
         </div>
         <div class="pole"></div>
      </div>

      <!-- ROAD -->
      <div class="road"></div>
      <div class="car stop" id="car"></div>

      <script>
         let red = document.getElementById("red");
         let yellow = document.getElementById("yellow");
         let green = document.getElementById("green");
         let timerEl = document.getElementById("timer");
         let car = document.getElementById("car");

         let started = false;
         let countdownInterval;

         const timings = {
            red: 2,
            yellow: 1,
            green: 9
         };

         function clearLights() {
            red.classList.remove("active");
            yellow.classList.remove("active");
            green.classList.remove("active");
         }

         function startCountdown(seconds) {
            let timeLeft = seconds;
            timerEl.textContent = timeLeft;

            clearInterval(countdownInterval);
            countdownInterval = setInterval(() => {
               timeLeft--;
               timerEl.textContent = timeLeft;
               if (timeLeft <= 0) clearInterval(countdownInterval);
            }, 1000);
         }

         function startSignal() {
            if (started) return;
            started = true;

            function cycle() {
               // RED
               clearLights();
               red.classList.add("active");
               car.classList.add("stop");
               startCountdown(timings.red);

               setTimeout(() => {
                  // YELLOW
                  clearLights();
                  yellow.classList.add("active");
                  startCountdown(timings.yellow);
               }, timings.red * 1000);

               setTimeout(() => {
                  // GREEN
                  clearLights();
                  green.classList.add("active");
                  car.classList.remove("stop");
                  startCountdown(timings.green);
               }, (timings.red + timings.yellow) * 1000);
            }

            cycle();
            setInterval(cycle, (timings.red + timings.yellow + timings.green) * 1000);
         }
      </script>

   </body>

</html>